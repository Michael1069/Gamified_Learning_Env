<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sustainability Data Lesson - Green Champions</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 50%, #fef3c7 100%);
            min-height: 100vh;
        }
        
        .animate-float {
            animation: float 6s ease-in-out infinite;
        }
        
        .animate-bounce-subtle {
            animation: bounce-subtle 2s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes bounce-subtle {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-5px); }
            60% { transform: translateY(-3px); }
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #10b981, #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .lesson-card {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
    </style>
</head>
<body>
    <!-- Navigation Header -->
    <nav class="bg-white/80 backdrop-blur-sm border-b border-white/50 sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex items-center justify-between">
                <button onclick="returnToLessons()" class="flex items-center text-blue-600 hover:text-blue-800 transition-colors">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                    Back to Lessons
                </button>
                <h1 class="text-2xl font-bold gradient-text">Introduction to Sustainability Data</h1>
                <div id="progress-indicator" class="text-sm text-gray-600">
                    Step 1 of 5
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content Container -->
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <!-- Lesson Introduction -->
        <div id="lesson-intro" class="lesson-card rounded-2xl shadow-xl p-8 mb-8">
            <div class="text-center mb-8">
                <div class="text-6xl mb-4 animate-bounce-subtle">üå±</div>
                <h2 class="text-3xl font-bold text-gray-800 mb-4">Welcome to Sustainability Data Learning</h2>
                <p class="text-xl text-gray-600 leading-relaxed">
                    Discover how data-driven approaches revolutionize environmental sustainability and help organizations make impactful decisions.
                </p>
            </div>
            <button onclick="startLesson()" class="w-full py-4 bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white rounded-xl font-semibold text-lg transition-all duration-300 transform hover:scale-105">
                Start Learning Journey
            </button>
        </div>

        <!-- Lesson Content Slides -->
        <div id="lesson-content" class="hidden">
            <!-- Slide 1 -->
            <div class="lesson-slide lesson-card rounded-2xl shadow-xl p-8 mb-8" data-slide="1">
                <div class="text-center">
                    <div class="text-5xl mb-6">üìä</div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">Data-Driven Sustainability Strategies</h3>
                    <p class="text-lg text-gray-600 leading-relaxed mb-8">
                        Data-driven strategies enable organizations to make evidence-based sustainability choices. By leveraging comprehensive data analysis, companies can identify the most impactful environmental initiatives and track their progress with precision.
                    </p>
                    <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                        <p class="text-green-800 font-medium">üí° Key Insight: Organizations using data-driven sustainability strategies are 3x more likely to achieve their environmental goals.</p>
                    </div>
                </div>
            </div>

            <!-- Slide 2 -->
            <div class="lesson-slide lesson-card rounded-2xl shadow-xl p-8 mb-8 hidden" data-slide="2">
                <div class="text-center">
                    <div class="text-5xl mb-6">üìà</div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">Quantifiable Metrics & Monitoring</h3>
                    <p class="text-lg text-gray-600 leading-relaxed mb-8">
                        Quantifiable metrics help monitor advancement toward sustainability goals and targets. These metrics provide clear benchmarks and enable organizations to measure their environmental impact accurately.
                    </p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <h4 class="font-semibold text-blue-800 mb-2">Carbon Footprint Tracking</h4>
                            <p class="text-blue-600 text-sm">Monitor CO2 emissions across operations</p>
                        </div>
                        <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
                            <h4 class="font-semibold text-purple-800 mb-2">Resource Efficiency</h4>
                            <p class="text-purple-600 text-sm">Measure water and energy consumption</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Slide 3 -->
            <div class="lesson-slide lesson-card rounded-2xl shadow-xl p-8 mb-8 hidden" data-slide="3">
                <div class="text-center">
                    <div class="text-5xl mb-6">‚ö†Ô∏è</div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">Risk Analysis & Early Detection</h3>
                    <p class="text-lg text-gray-600 leading-relaxed mb-8">
                        Early identification of environmental and social risks through comprehensive data analysis. This proactive approach helps organizations address potential issues before they become critical problems.
                    </p>
                    <div class="bg-amber-50 border border-amber-200 rounded-lg p-4">
                        <p class="text-amber-800 font-medium">üîç Example: Predictive analytics can identify supply chain vulnerabilities related to climate change up to 2 years in advance.</p>
                    </div>
                </div>
            </div>

            <!-- Slide 4 -->
            <div class="lesson-slide lesson-card rounded-2xl shadow-xl p-8 mb-8 hidden" data-slide="4">
                <div class="text-center">
                    <div class="text-5xl mb-6">üí°</div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">Innovation & Business Model Development</h3>
                    <p class="text-lg text-gray-600 leading-relaxed mb-8">
                        Data insights drive development of sustainable technologies and business models. By analyzing market trends and environmental data, organizations can create innovative solutions that benefit both business and the planet.
                    </p>
                    <div class="bg-indigo-50 border border-indigo-200 rounded-lg p-4">
                        <p class="text-indigo-800 font-medium">üöÄ Innovation: Data-driven sustainability has led to breakthroughs in renewable energy, circular economy models, and green technologies.</p>
                    </div>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="flex justify-between items-center mt-8">
                <button id="prev-btn" onclick="previousSlide()" disabled class="px-6 py-3 bg-gray-200 text-gray-500 rounded-xl font-medium cursor-not-allowed">
                    Previous
                </button>
                <div class="flex space-x-2">
                    <div class="slide-indicator w-3 h-3 bg-blue-500 rounded-full"></div>
                    <div class="slide-indicator w-3 h-3 bg-gray-300 rounded-full"></div>
                    <div class="slide-indicator w-3 h-3 bg-gray-300 rounded-full"></div>
                    <div class="slide-indicator w-3 h-3 bg-gray-300 rounded-full"></div>
                </div>
                <button id="next-btn" onclick="nextSlide()" class="px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-xl font-medium transition-colors">
                    Next
                </button>
            </div>
        </div>

        <!-- Quiz Section -->
        <div id="quiz-section" class="hidden">
            <div class="lesson-card rounded-2xl shadow-xl p-8 mb-8">
                <div class="text-center mb-8">
                    <div class="text-5xl mb-4">üß†</div>
                    <h2 class="text-3xl font-bold text-gray-800 mb-4">Knowledge Check</h2>
                    <p class="text-lg text-gray-600">
                        Test your understanding of tree plantation and sustainability data! Answer all 5 questions correctly to unlock the spectacular finale.
                    </p>
                </div>

                <!-- Quiz Questions -->
                <div id="quiz-questions">
                    <!-- Questions will be populated by JavaScript -->
                </div>

                <button id="submit-quiz" onclick="submitQuiz()" disabled class="w-full mt-6 py-4 bg-gray-300 text-gray-500 rounded-xl font-bold text-lg cursor-not-allowed">
                    Submit Answers
                </button>
            </div>
        </div>

        <!-- Completion Section -->
        <div id="completion-section" class="hidden">
            <div class="lesson-card rounded-2xl shadow-xl p-8 text-center">
                <div class="text-6xl mb-6 animate-bounce-subtle">üéâ</div>
                <h2 class="text-3xl font-bold gradient-text mb-4">Congratulations!</h2>
                <p class="text-xl text-gray-700 mb-6">
                    You've successfully completed the Green India Mission journey, learned about sustainability data, and aced the quiz!
                </p>
                
                <div class="bg-gradient-to-r from-green-100 to-blue-100 border border-green-200 rounded-xl p-6 mb-8">
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">You're now ready to become a</h3>
                    <div class="text-4xl font-bold gradient-text mb-4">Green Champion</div>
                    <p class="text-lg text-gray-600">and sustainability data expert!</p>
                </div>

                <div class="mb-8">
                    <p class="text-lg text-gray-600 mb-4">
                        Dr. RK Nair's revolutionary Miyawaki technique transforms barren lands into thriving forests in record time. His work represents the future of urban reforestation and climate action.
                    </p>
                    <p class="text-base text-gray-500">
                        Share this knowledge and inspire others to join India's reforestation mission.
                    </p>
                </div>

                <button id="complete-lesson-btn" onclick="completeLessonAndReturn()" class="w-full py-4 bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white rounded-xl font-bold text-xl transition-all duration-300 transform hover:scale-105 animate-pulse">
                    Complete Lesson & Earn Eco Points! üåü
                </button>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentSlide = 1;
        const totalSlides = 4;
        let quizAnswers = {};
        
        // Quiz questions
        const quizQuestions = [
            {
                id: 1,
                question: "What enables organizations to make evidence-based sustainability choices?",
                options: ["Guesswork", "Data-driven strategies", "Random decisions", "Assumptions"],
                correct: 1
            },
            {
                id: 2,
                question: "What do quantifiable metrics help monitor?",
                options: ["Employee satisfaction", "Advancement toward sustainability goals", "Office decoration", "Meeting schedules"],
                correct: 1
            },
            {
                id: 3,
                question: "What does early risk identification help with?",
                options: ["Party planning", "Environmental and social risk management", "Sports activities", "Cooking recipes"],
                correct: 1
            },
            {
                id: 4,
                question: "Data insights drive development of what?",
                options: ["Video games", "Sustainable technologies and business models", "Fashion trends", "Movie scripts"],
                correct: 1
            },
            {
                id: 5,
                question: "Dr. RK Nair is known for which technique?",
                options: ["Cooking technique", "Miyawaki forest technique", "Dance technique", "Painting technique"],
                correct: 1
            }
        ];

        // Initialize lesson
        function startLesson() {
            document.getElementById('lesson-intro').classList.add('hidden');
            document.getElementById('lesson-content').classList.remove('hidden');
            updateProgressIndicator();
            const startLesson = (lessonId) => {
  // Store the current lesson ID and return URL in localStorage
  localStorage.setItem('currentLessonId', lessonId.toString());
  localStorage.setItem('returnUrl', '/dashboard/lessons');
  
  // Navigate to the HTML lesson content page
  window.location.href = `/lessons/sustainability-lesson.html?lessonId=${lessonId}`;
};

        }

        // Navigation functions
        function nextSlide() {
            if (currentSlide < totalSlides) {
                document.querySelector(`.lesson-slide[data-slide="${currentSlide}"]`).classList.add('hidden');
                currentSlide++;
                if (currentSlide <= totalSlides) {
                    document.querySelector(`.lesson-slide[data-slide="${currentSlide}"]`).classList.remove('hidden');
                    updateSlideIndicators();
                    updateNavigationButtons();
                    updateProgressIndicator();
                }
            } else {
                // Move to quiz
                document.getElementById('lesson-content').classList.add('hidden');
                document.getElementById('quiz-section').classList.remove('hidden');
                loadQuiz();
                updateProgressIndicator();
            }
        }

        function previousSlide() {
            if (currentSlide > 1) {
                document.querySelector(`.lesson-slide[data-slide="${currentSlide}"]`).classList.add('hidden');
                currentSlide--;
                document.querySelector(`.lesson-slide[data-slide="${currentSlide}"]`).classList.remove('hidden');
                updateSlideIndicators();
                updateNavigationButtons();
                updateProgressIndicator();
            }
        }

        // Update UI functions
        function updateSlideIndicators() {
            const indicators = document.querySelectorAll('.slide-indicator');
            indicators.forEach((indicator, index) => {
                if (index < currentSlide) {
                    indicator.classList.remove('bg-gray-300');
                    indicator.classList.add('bg-blue-500');
                } else {
                    indicator.classList.remove('bg-blue-500');
                    indicator.classList.add('bg-gray-300');
                }
            });
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');

            if (currentSlide === 1) {
                prevBtn.disabled = true;
                prevBtn.classList.add('cursor-not-allowed', 'bg-gray-200', 'text-gray-500');
                prevBtn.classList.remove('cursor-pointer', 'bg-gray-300', 'text-gray-700');
            } else {
                prevBtn.disabled = false;
                prevBtn.classList.remove('cursor-not-allowed', 'bg-gray-200', 'text-gray-500');
                prevBtn.classList.add('cursor-pointer', 'bg-gray-300', 'text-gray-700');
            }

            if (currentSlide === totalSlides) {
                nextBtn.textContent = 'Take Quiz';
            } else {
                nextBtn.textContent = 'Next';
            }
        }

        function updateProgressIndicator() {
            const progressIndicator = document.getElementById('progress-indicator');
            if (currentSlide <= totalSlides) {
                progressIndicator.textContent = `Step ${currentSlide} of 5`;
            } else {
                progressIndicator.textContent = 'Quiz Time!';
            }
        }

        // Quiz functions
        function loadQuiz() {
            const questionsContainer = document.getElementById('quiz-questions');
            questionsContainer.innerHTML = '';

            quizQuestions.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'mb-6';
                questionDiv.innerHTML = `
                    <h4 class="text-lg font-semibold text-gray-800 mb-4">${index + 1}. ${q.question}</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                        ${q.options.map((option, optionIndex) => `
                            <button onclick="selectAnswer(${q.id}, ${optionIndex})" 
                                    class="quiz-option p-4 text-left border rounded-xl transition-all hover:bg-gray-50" 
                                    data-question="${q.id}" data-option="${optionIndex}">
                                ${option}
                            </button>
                        `).join('')}
                    </div>
                `;
                questionsContainer.appendChild(questionDiv);
            });
        }

        function selectAnswer(questionId, optionIndex) {
            // Remove previous selection for this question
            document.querySelectorAll(`[data-question="${questionId}"]`).forEach(btn => {
                btn.classList.remove('border-blue-500', 'bg-blue-50', 'text-blue-700');
                btn.classList.add('border-gray-200');
            });

            // Highlight selected option
            const selectedBtn = document.querySelector(`[data-question="${questionId}"][data-option="${optionIndex}"]`);
            selectedBtn.classList.remove('border-gray-200');
            selectedBtn.classList.add('border-blue-500', 'bg-blue-50', 'text-blue-700');

            // Store answer
            quizAnswers[questionId] = optionIndex;

            // Check if all questions answered
            if (Object.keys(quizAnswers).length === quizQuestions.length) {
                const submitBtn = document.getElementById('submit-quiz');
                submitBtn.disabled = false;
                submitBtn.classList.remove('bg-gray-300', 'text-gray-500', 'cursor-not-allowed');
                submitBtn.classList.add('bg-green-500', 'hover:bg-green-600', 'text-white', 'cursor-pointer');
            }
        }

        function submitQuiz() {
            // Check answers
            let correctCount = 0;
            quizQuestions.forEach(q => {
                if (quizAnswers[q.id] === q.correct) {
                    correctCount++;
                }
            });

            if (correctCount === quizQuestions.length) {
                // All correct - show completion
                document.getElementById('quiz-section').classList.add('hidden');
                document.getElementById('completion-section').classList.remove('hidden');
                document.getElementById('progress-indicator').textContent = 'Completed! üéâ';
            } else {
                // Some wrong - show retry message
                alert(`You got ${correctCount} out of ${quizQuestions.length} correct. Please try again!`);
                // Reset quiz
                quizAnswers = {};
                loadQuiz();
                const submitBtn = document.getElementById('submit-quiz');
                submitBtn.disabled = true;
                submitBtn.classList.add('bg-gray-300', 'text-gray-500', 'cursor-not-allowed');
                submitBtn.classList.remove('bg-green-500', 'hover:bg-green-600', 'text-white', 'cursor-pointer');
            }
        }

        // Return to React app functions
        function returnToLessons() {
            const returnUrl = localStorage.getItem('returnUrl') || '/dashboard/lessons';
            window.location.href = returnUrl;
        }

        function completeLessonAndReturn() {
            const urlParams = new URLSearchParams(window.location.search);
            const lessonId = urlParams.get('lessonId') || '1';
            const returnUrl = localStorage.getItem('returnUrl') || '/dashboard/lessons';
            
            // Redirect back to React app with completion parameter
            window.location.href = `${returnUrl}?completed=${lessonId}`;
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateNavigationButtons();
            updateSlideIndicators();
        });
    </script>
</body>
</html>
